<ol class="list-decimal pl-5">
  <template x-for="item in $todoList.displayList" :key="item.id">
    <li x-data="{ editing: false, title: item.title }" class="my-3 select-none">
      <template x-if="editing">
        <input
          type="text"
          class="input input-info input-bordered input-sm"
          @keyup.enter="handleEditDone"
          @blur="handleEditDone"
          x-model="title"
        />
      </template>
      <template x-if="!editing">
        <span x-text="item.title" class="select-text"></span>
      </template>
      <div class="mx-3 inline-flex gap-3 items-center">
        <span
          @click="$todoList.changeStatus(item.id)"
          class="badge badge-md badge-outline badge-primary cursor-pointer"
          x-text="item.status"
        ></span>
        <button @click="editing = !editing" class="btn btn-xs btn-square">
          <iconify-icon icon="mdi:edit" class="text-base text-green-600"></iconify-icon>
        </button>
        <button @click="$todoList.delete(item.id)" class="btn btn-xs btn-square">
          <iconify-icon icon="mdi:delete" class="text-base text-gray-600"></iconify-icon>
        </button>
      </div>
    </li>
  </template>
  <template x-if="$todoList.displayList.length === 0">
    <p>List is empty.</p>
  </template>
</ol>

<script>
  import $todoList from './todo-list.store'

  export default () => ({
    $todoList,
    handleEditDone() {
      if (!this.title) {
        this.title = this.item.title
      } else {
        this.item.title = this.title
      }
      this.editing = false
    },
  })
</script>
